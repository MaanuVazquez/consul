<% content_for :head do %>
    <%= javascript_include_tag "stat_graphs", 'data-turbolinks-track' => true %>
<% end %>
<div class="stats">
  <div class="row">
    <div class="small-12 column">
      <h1 class="inline-block"><%= t "admin.stats.show.stats_title" %></h1>

      <div class="float-right clear">
        <%= link_to t("admin.stats.show.direct_messages"),
                    direct_messages_admin_stats_path, class: "button hollow" %>
        <%= link_to t("admin.stats.show.proposal_notifications"),
                    proposal_notifications_admin_stats_path, class: "button hollow" %>

      </div>

      <div class="clear"></div>

      <div class="row stats-numbers">
        <div class="small-12 medium-3 column">
          <p class="featured">
            <%= t "admin.stats.show.summary.visits" %><br>
            <span class="number"><%= number_with_delimiter(@visits) %></span>
          </p>
          <p>
            <%= t "admin.stats.show.summary.comments" %><br>
            <span class="number"><%= number_with_delimiter(@comments) %></span>
          </p>
          <p>
            <%= t "admin.stats.show.summary.comment_votes" %><br>
            <span class="number"><%= number_with_delimiter(@comment_votes) %></span>
          </p>
          <p>
            <%= t "admin.stats.show.summary.votes" %> en total<br>
            <span class="number"><%= number_with_delimiter(@votes) %></span>
          </p>
        </div>

        <div class="small-12 medium-3 column">
          <p class="featured">
            <%= t "admin.stats.show.summary.users" %><br>
            <span class="number"><%= number_with_delimiter(@users) %></span>
          </p>

          <p>
            <%= t "admin.stats.show.summary.users" %> no bloqueados<br>
            <span class="number"><%= number_with_delimiter(@total_users) %></span>
          </p>

          <p>
            <%= t "admin.stats.show.summary.users" %> confirmados<br>
            <span class="number"><%= number_with_delimiter(@confirmed_users) %></span>
          </p>

          <p>
            <%= t "admin.stats.show.summary.users" %> no confirmados<br>
            <span class="number">
              <%=number_with_delimiter(@unconfirmed_users)%>
            </span>
          </p>
          <p>
            <%= t "admin.stats.show.summary.verified_users" %> (por gestores)<br>
            <span class="number"><%= number_with_delimiter(@users_created_by_gestion) %></span>
          </p>

          <p>
            <%= t "admin.stats.show.summary.unverified_users" %> (registros propios)<br>
            <span class="number"><%= number_with_delimiter(@unverified_users) %></span>
          </p>
        </div>

        <div class="small-12 medium-3 column">
          <p class="featured">
            <%= t "admin.stats.show.summary.proposals" %><br>
            <span class="number"><%= number_with_delimiter(@investments) %></span>
          </p>
          <p>
            <%= t "admin.stats.show.summary.proposals" %> no bloqueadas<br>
            <span class="number"><%= number_with_delimiter(@investments_count) %></span>
          </p>
          <p>
            <%= t "admin.stats.show.summary.proposals" %> bloqueadas<br>
            <span class="number"><%= number_with_delimiter(@investments_moderated) %></span>
          </p>
        </div>

        <div class="small-12 medium-3 column">
          <p class="featured">
            <%= t "admin.stats.show.summary.proposals" %> por categor√≠a<br>
          <table>
            <% @investments_per_category.each do |category| %>
                <tr>
                  <td><%= category[0] %></td>
                  <td><b><%= category[1] %></b></td>
                </tr>
            <% end %>
          </table>
          </p>
        </div>

        <div class="small-12 column">
          <p>
            <%= t "admin.stats.show.summary.users" %> sin confirmar (<%= number_with_delimiter(@all_unconfirmed) %>)<br>
            <textarea name="" id="" cols="30" rows="10">
              <%= @unconfirmed_users_emails.join(", ") %>, <%= @unconfirmed_users_oath_emails.join(", ") %>
            </textarea>
          </p>
        </div>

        <div class="small-12 column">
          <p>
            <%= t "admin.stats.show.summary.users" %> (todos)<br>
            <textarea name="" id="" cols="30" rows="10">
              <%= @all_users_emails.join(", ") %>
            </textarea>
          </p>
        </div>

      </div>

      <div class="small-12 column">
        <h2><%= t "admin.stats.show.visits_title" %></h2>
        <%= visits_chart_tag id: "visits" %>
      </div>

      <!--<div class="small-12 column">-->
        <!--<%# @event_types.each do |event, count| %>-->
            <!--<h2><%#= event.titleize %> (<%#= count %>)</h2>-->
            <!--<%#= events_chart_tag event %>-->
        <!--<%# end %>-->
      <!--</div>-->

      <!--<div class="small-12 column">-->
        <!--<h2><%#= t "admin.stats.show.spending_proposals_title" %></h2>-->
        <!--<%#= spending_proposals_chart_tag id: "spending_proposals" %>-->
      <!--</div>-->

    </div>
  </div>
</div>